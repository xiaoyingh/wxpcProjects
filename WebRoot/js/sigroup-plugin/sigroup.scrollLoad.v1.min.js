var ScrollLoadContainer=function(a,b,c,d){this.container=$("#"+a),this.url=b,this.options=c,this.func=d,this.range=10,this.count,this.isRec=1,this.handle=null,this.pageNo=0,this.pageSize=30,this.wait=1e3,this.loadTopRate=1,this.isFirstLoad=!0,this.unitBrick=".item",this.end_html="<div class='more_end'></div>",this.loading_html="<img src='images/scroll_loading.gif'/>",this.more_html="<div class='more_load'></div>"};ScrollLoadContainer.prototype.init=function(){var a=this;return a.container.empty(),a.container.append("<div class='content_div'></div>"),a.container.append("<div class='load_more_btn' style='cursor:pointer;text-align:center;margin-top:50px;'></div>"),a.container.append("<div class='cache_div' style='display:none;'></div>"),a.count=a.range,$(".load_more_btn",a.container).click(function(){2==a.isRec&&(a.count=a.range,a.loadMore())}),a.container.scroll(function(){clearTimeout(a.handle),a.container.scrollTop()+a.container.height()>=a.container.find(".content_div").height()*a.loadTopRate&&1==a.isRec&&(a.handle=setTimeout(function(){a.loadMore()},a.wait))}),a.loadMore(),a},ScrollLoadContainer.prototype.loadMore=function(){var a=this;a.isRec=0,a.count--,a.pageNo++,a.updateTip(),a.loadPage()},ScrollLoadContainer.prototype.updateTip=function(){var a=this;switch(a.isRec){case-1:$(".load_more_btn",a.container).html(a.end_html);break;case 0:$(".load_more_btn",a.container).html(a.loading_html);break;case 1:$(".load_more_btn",a.container).html("");break;case 2:$(".load_more_btn",a.container).html(a.more_html)}},ScrollLoadContainer.prototype.loadPage=function(){var a=this;console.log("loadPage"),a.options.pageNo=a.pageNo,a.options.pageSize=a.pageSize,$(".cache_div",a.container).load(a.url,a.options,function(){var b=$(".cache_div",a.container).find(a.unitBrick);null!=b&&b.length>0?(a.isFirstLoad?($(".content_div",a.container).append(b),a.isFirstLoad=!1):(b.hide(),$(".content_div",a.container).append(b),b.fadeIn()),a.isRec=0==a.count?2:1,a.func&&a.func($(".cache_div",a.container)),$(".cache_div",a.container).empty()):a.isRec=-1,a.updateTip()})};var ScrollLoadWindow=function(a,b,c,d){this.container=$("#"+a),this.url=b,this.options=c,this.func=d,this.range=10,this.count,this.isRec=1,this.handle=null,this.pageNo=0,this.pageSize=30,this.wait=1e3,this.loadTopRate=1,this.isFirstLoad=!0,this.unitBrick=".item",this.end_html="<div class='more_end'></div>",this.loading_html="<img src='images/scroll_loading.gif'/>",this.more_html="<div class='more_load'></div>"};ScrollLoadWindow.prototype.init=function(){var a=this;return a.container.empty(),a.container.append("<div class='content_div'></div>"),a.container.append("<div class='load_more_btn' style='cursor:pointer;text-align:center;margin-top:50px;'></div>"),a.container.append("<div class='cache_div' style='display:none;'></div>"),a.container.append("<div style='display:none;' id='gotopbtn' class='to_top'><a title='\u8fd4\u56de\u9876\u90e8' href='javascript:void(0);'></a></div>"),a.count=a.range,$(".load_more_btn",a.container).click(function(){2==a.isRec&&(a.count=a.range,a.loadMore())}),$("#gotopbtn").click(function(){$(document).scrollTop(0)}),$(document).scroll(function(){$(document).scrollTop()>window.innerHeight?$("#gotopbtn").css("display",""):$("#gotopbtn").css("display","none"),clearTimeout(a.handle),$(document).scrollTop()+window.innerHeight>=(a.container.offset().top+a.container.find(".content_div").height())*a.loadTopRate&&1==a.isRec&&(a.handle=setTimeout(function(){a.loadMore()},a.wait))}),a.loadMore(),a},ScrollLoadWindow.prototype.loadMore=function(){var a=this;a.isRec=0,a.count--,a.pageNo++,a.updateTip(),a.loadPage()},ScrollLoadWindow.prototype.updateTip=function(){var a=this;switch(a.isRec){case-1:$(".load_more_btn",a.container).html(a.end_html);break;case 0:$(".load_more_btn",a.container).html(a.loading_html);break;case 1:$(".load_more_btn",a.container).html("");break;case 2:$(".load_more_btn",a.container).html(a.more_html)}},ScrollLoadWindow.prototype.loadPage=function(){var a=this;console.log("loadPage"),a.options.pageNo=a.pageNo,a.options.pageSize=a.pageSize,$(".cache_div",a.container).load(a.url,a.options,function(){var b=$(".cache_div",a.container).find(a.unitBrick);null!=b&&b.length>0?(a.isFirstLoad?($(".content_div",a.container).append(b),a.isFirstLoad=!1):(b.hide(),$(".content_div",a.container).append(b),b.fadeIn()),a.isRec=0==a.count?2:1,a.func&&a.func($(".cache_div",a.container)),$(".cache_div",a.container).empty()):a.isRec=-1,a.updateTip()})};var ScrollLoadWindowMasonry=function(a,b,c,d){this.container=$("#"+a),this.url=b,this.options=c,this.func=d,this.range=10,this.count,this.isRec=1,this.handle=null,this.pageNo=0,this.pageSize=30,this.wait=1e3,this.loadTopRate=1,this.isFirstLoad=!0,this.unitBrick=".item",this.columnWidth=226,this.gutterWidth=15,this.end_html="<div class='more_end'></div>",this.loading_html="<img src='images/scroll_loading.gif'/>",this.more_html="<div class='more_load'></div>"};ScrollLoadWindowMasonry.prototype.init=function(){var a=this;return a.container.empty(),a.container.append("<div class='content_div item_list'></div>"),a.container.append("<div class='load_more_btn' style='cursor:pointer;text-align:center;margin-top:50px;'></div>"),a.container.append("<div class='cache_div' style='display:none;'></div>"),a.container.append("<div style='display:none;' id='gotopbtn' class='to_top'><a title='\u8fd4\u56de\u9876\u90e8' href='javascript:void(0);'></a></div>"),a.count=a.range,$(".load_more_btn",a.container).click(function(){2==a.isRec&&(a.count=a.range,a.loadMore())}),$("#gotopbtn").click(function(){$(document).scrollTop(0)}),$(document).scroll(function(){$(document).scrollTop()>window.innerHeight?$("#gotopbtn").css("display",""):$("#gotopbtn").css("display","none"),clearTimeout(a.handle),$(document).scrollTop()+window.innerHeight>=(a.container.offset().top+a.container.find(".content_div").height())*a.loadTopRate&&1==a.isRec&&(a.handle=setTimeout(function(){a.loadMore()},a.wait))}),a.loadMore(),a},ScrollLoadWindowMasonry.prototype.loadMore=function(){var a=this;a.isRec=0,a.count--,a.pageNo++,a.updateTip(),a.loadPage()},ScrollLoadWindowMasonry.prototype.updateTip=function(){var a=this;switch(a.isRec){case-1:$(".load_more_btn",a.container).html(a.end_html);break;case 0:$(".load_more_btn",a.container).html(a.loading_html);break;case 1:$(".load_more_btn",a.container).html("");break;case 2:$(".load_more_btn",a.container).html(a.more_html)}},ScrollLoadWindowMasonry.prototype.loadPage=function(){var a=this;console.log("loadPage"),a.options.pageNo=a.pageNo,a.options.pageSize=a.pageSize,$(".cache_div",a.container).load(a.url,a.options,function(){var b=$(".cache_div",a.container).find(a.unitBrick);null!=b&&b.length>0?(a.isFirstLoad?($(".content_div",a.container).append(b),$(".content_div",a.container).imagesLoaded(function(){$(".content_div",a.container).masonry({itemSelector:a.unitBrick,columnWidth:a.columnWidth,gutterWidth:a.gutterWidth})}),$(".content_div",a.container).masonry({itemSelector:a.unitBrick,columnWidth:a.columnWidth,gutterWidth:a.gutterWidth}),a.isFirstLoad=!1):(b.hide(),$(".content_div",a.container).append(b).masonry("reload"),b.fadeIn()),a.isRec=0==a.count?2:1,a.func&&a.func($(".cache_div",a.container)),$(".cache_div",a.container).empty()):a.isRec=-1,a.updateTip()})};